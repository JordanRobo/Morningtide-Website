FROM oven/bun

WORKDIR /app

ARG ORIGIN
ARG GHOST_URL
ARG GHOST_KEY
ARG PB_URL
ARG GETRESPONSE_KEY

# Set environment variables
ENV ORIGIN=${ORIGIN}
ENV GHOST_URL=${GHOST_URL}
ENV VITE_GHOST_KEY=${GHOST_KEY}
ENV PB_URL=${PB_URL}
ENV GETRESPONSE_KEY=${GETRESPONSE_KEY}

COPY package*.json bun.lock ./

RUN bun install

COPY . .

RUN bun run build

EXPOSE 3000

CMD [ "bun", "start" ]
